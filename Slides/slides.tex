%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Beamer Presentation
% LaTeX Template
% Version 1.0 (10/11/12)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND THEMES
%----------------------------------------------------------------------------------------

\documentclass{beamer}

\mode<presentation> {

% The Beamer class comes with a number of default slide themes
% which change the colors and layouts of slides. Below this is a list
% of all the themes, uncomment each in turn to see what they look like.

%\usetheme{default}
%\usetheme{AnnArbor}
%\usetheme{Antibes}
%\usetheme{Bergen}
%\usetheme{Berkeley}
%\usetheme{Berlin}
%\usetheme{Boadilla}
%\usetheme{CambridgeUS}
%\usetheme{Copenhagen}
%\usetheme{Darmstadt}
%\usetheme{Dresden}
%\usetheme{Frankfurt}
%\usetheme{Goettingen}
%\usetheme{Hannover}
%\usetheme{Ilmenau}
%\usetheme{JuanLesPins}
%\usetheme{Luebeck}
%\usetheme{Madrid}
%\usetheme{Malmoe}
%\usetheme{Marburg}
%\usetheme{Montpellier}
%\usetheme{PaloAlto}
%\usetheme{Pittsburgh}
%\usetheme{Rochester}
%\usetheme{Singapore}
%\usetheme{Szeged}
\usetheme{Warsaw}

% As well as themes, the Beamer class has a number of color themes
% for any slide theme. Uncomment each of these in turn to see how it
% changes the colors of your current slide theme.

%\usecolortheme{albatross}
%\usecolortheme{beaver}
%\usecolortheme{beetle}
\usecolortheme{crane}
%\usecolortheme{dolphin}
%\usecolortheme{dove}
%\usecolortheme{fly}
%\usecolortheme{lily}
%\usecolortheme{orchid}
%\usecolortheme{rose}
%\usecolortheme{seagull}
%\usecolortheme{seahorse}
%\usecolortheme{whale}
%\usecolortheme{wolverine}

%\setbeamertemplate{footline} % To remove the footer line in all slides uncomment this line
%\setbeamertemplate{footline}[page number] % To replace the footer line in all slides with a simple slide count uncomment this line

\setbeamertemplate{navigation symbols}{} % To remove the navigation symbols from the bottom of all slides uncomment this line
}

\usepackage{graphicx} % Allows including images
\usepackage{booktabs} % Allows the use of \toprule, \midrule and \bottomrule in tables
%\usepackage[utf8]{inputenc} %Codificacion utf-8
%\newtheorem{example}{ejemplo}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel} %Definir idioma español
\uselanguage{Spanish}
\languagepath{Spanish}

%\usetheme{Copenhagen}

\deftranslation[to=Spanish]{Example}{Ejemplo}

%comands
\usepackage{tikz}
\usepackage{tikz-uml} 
\usepackage{pgfgantt}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\def\BState{\State\hskip-\ALG@thistlm}
\def\BSState{\State\hskip\hskip-\ALG@thistlm}
\newcommand*{\escape}[1]{\texttt{\textbackslash#1}}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\title[Tokenizador, Pos tagger y lematizador]{Algoritmos para el procesamiento del lenguaje natural en Español: Tokenizador, POS tagger y lematizador} % The short title appears at the bottom of every slide, the full title is only on the title page

\author{Cristina Heredia} % Your name
\institute[UGR] % Your institution as it will appear on the bottom of every slide, may be shorthand to save space
{
Trabajo fin de grado en Ingeniería informática \\ % Your institution for the title page
\medskip
\textit{Universidad de Granada} % Your email address
}
\date{\today} % Date, can be changed to a custom date

\begin{document}

\begin{frame}
\titlepage % Print the title page as the first slide
\end{frame}

%\begin{frame}
%\frametitle{Overview} % Table of contents slide, comment this block out to remove it
%\tableofcontents % Throughout your presentation, if you choose to use \section{} and \subsection{} commands, these will automatically be printed on this slide as an overview of your presentation
%\end{frame}

%----------------------------------------------------------------------------------------
%	PRESENTATION SLIDES
%----------------------------------------------------------------------------------------

%------------------------------------------------
\section{Introdución al problema } % Sections can be created in order to organize your presentation into discrete blocks, all sections and subsections are automatically printed in the table of contents as an overview of the talk
%------------------------------------------------


%\-----------------------------
%\  Introducción al PLN
%\-----------------------------
\begin{frame}
\frametitle{Introducción al PLN}
\begin{block}{Definición}
PLN es el área de estudio y aplicación que engloba cualquier manipulación computacional del lenguaje natural. 
\end{block}
%\begin{frame}[fragile] % Need to use the fragile option when verbatim is used in the slide
%\frametitle{Verbatim}
\begin{example}[Aplicaciones de PLN]
Contar ocurrencias de las palabras para detectar estilo de escritura, asistentes de voz (Siri, Google Now)...
\end{example}

\begin{block}{Áreas de aplicación del PLN}
\begin{itemize}
\item Traducción automática
\item Sistemas de reconocimiento del habla
\item Lectura automática
\item Minería de datos en RRSS
\item Análisis de sentimientos
\end{itemize}
\end{block}
\end{frame}

%------------------------------------------------
%\  Introducción al problema (motivación)
%\-----------------------------------------------
\begin{frame}
\frametitle{Introducción al problema}
El objetivo final de toda suite PLN es tener un conjunto de herramientas para realizar finalmente análisis de sentimientos o alguna extracción de información.
\begin{enumerate}
\item \textbf{Obtención de datos}
\item \textbf{Procesado del texto:}
\end{enumerate}
\begin{columns}[c]
\column{.45\textwidth}
\begin{itemize}
\item Tokenización
\item Detección de límites de oraciones
\item Lematización
\end{itemize}
\column{.45\textwidth}
\begin{itemize}
\item Stemming
\item POS tagging
\item Parseo sintáctico
\end{itemize}
\end{columns}
\end{frame}

%------------------------------------------------
%\  tokenización
%\-----------------------------------------------
\begin{frame}
\frametitle{Introducción al problema: Tokenización}
\begin{block}{Definición}
Proceso que separa el texto en uniades atómicas, los tokens(palabras, números, símbolos).
\end{block}
\begin{block}{Dificultades}
Lenguajes sin espacios entre palabras (Chino, Árabe...)
\end{block}
\begin{block}{Técnicas}
Freeling, Apache OpenNLP ,NLTK, StanfordNLP, Stanford Word Segmenter
\end{block}
\end{frame}

%------------------------------------------------
%\  detección de oraciones
%\-----------------------------------------------
\begin{frame}
\frametitle{Introducción al problema: Detección de oraciones}
\begin{block}{Definición}
Proceso que establece los límites de las oraciones del texto.
\end{block}
\begin{block}{Dificultades}
Las marcas de final de oración son ambiguas. (final de oración, abreviaciones, decimales...)
\end{block}
\begin{block}{Técnicas}
Punkt, iSentenizer
\end{block}
\end{frame}

%------------------------------------------------
%\  lematización
%\-----------------------------------------------
\begin{frame}
\frametitle{Introducción al problema: Lematización}
\begin{block}{Definición}
Proceso que determina el lema (forma base o de diccionario) de una palabra. 
\end{block}
\begin{block}{Relevancia}
Acorta la complejidad computacional del problema.
\end{block}
\begin{block}{Dificultades}
Lenguajes con más formas inflexivas (Español, Alemán).
\end{block}
\begin{block}{Técnicas}
Patern.es, lemming, lemagen
\end{block}
\end{frame}

%------------------------------------------------
%\  Stemming
%\-----------------------------------------------
\begin{frame}
\frametitle{Introducción al problema: Stemming}
\begin{block}{Definición}
Proceso que reduce la palabra a su forma base eliminando sus sufijos. 
\end{block}
\begin{block}{Relevancia}
Puede usarse en lugar de la lematización, como complemento o no usarse.
\end{block}
\begin{block}{Dificultades}
Lenguajes con muchas formas inflexivas (Español, Alemán).
\end{block}
\begin{block}{Técnicas}
NLTK, Snowball
\end{block}
\end{frame}

%------------------------------------------------
%\  POS tagging
%\-----------------------------------------------
\begin{frame}
\frametitle{Introducción al problema: Pos Tagging}
\begin{block}{Definición}
Proceso que etiqueta cada palabra con su categgoría morfosintáctica (POS). 
\end{block}
\begin{block}{Relevancia}
Es muy importante, se utiliza en otros procesos PLN.
\end{block}
\begin{block}{Dificultades}
Tratar ambiguedad: palabras con varias funciones, asignar etiqueta a palabras desconocidas
\end{block}
\begin{block}{Técnicas}
Standford POS Tagger, SVMTool, TreeTagger
\end{block}
\end{frame}

%------------------------------------------------
%\  Parseo de dependencias
%\-----------------------------------------------
\begin{frame}
\frametitle{Introducción al problema: Parseo sintáctico}
\begin{block}{Definición}
Proceso que analiza las oraciones para producir estructuras que reflejen como se organizan las palabras en las frases. Formalismos: Constituyente y de dependencia.
\end{block}
\begin{columns}[c]
\column{.45\textwidth}
\begin{figure}
\includegraphics[width=0.80\linewidth]{../Memory/Dissertate-Harvard-LaTeX/constituency.png}
\end{figure}
\column{.45\textwidth}
\begin{figure}
\includegraphics[width=0.80\linewidth]{../Memory/Dissertate-Harvard-LaTeX/dependency.png}
\end{figure}
\end{columns}
\begin{block}{Técnicas}
StanfordParser, MaltParser, TurboParser
\end{block}
\end{frame}

%------------------------------------------------
%\  figura coreNLP
%\-----------------------------------------------
\begin{frame}
\frametitle{Ejemplo de pipeline: Stanford CoreNLP}
\begin{figure}
\includegraphics[width=0.45\linewidth]{../Memory/Dissertate-Harvard-LaTeX/stanford.png}
\end{figure}

%\begin{block}{Block 3}
%Suspendisse tincidunt sagittis gravida. Curabitur condimentum, enim sed venenatis rutrum, ipsum neque consectetur %orci, sed blandit justo nisi ac lacus.
%\end{block}
\end{frame}

%------------------------------------------------
\section{Resolución del trabajo}
%------------------------------------------------
\subsection{Metodología}
%-------------Scala--------------------------
\begin{frame}[fragile]
\frametitle{Un lenguaje de programación: Scala}
\begin{columns}[c] % The "c" option specifies centered vertical alignment while the "t" option is used for top vertical alignment

\column{.45\textwidth} % Left column and width
\textbf{Razones para aprender Scala}
\begin{enumerate}
\item Es Scalable
\item Paradigma mixto
\item Sistema amplio de tipos
\item Herramientas y librería de Java
\item Estáticamente tipado
\item Sintaxis concisa, elegante, flexible
\item Scala en concurrencia y big data
\end{enumerate}

\column{.6\textwidth} % Right column and width
%\frametitle{Verbatim}
\begin{example}[Código Java]
\begin{tiny}
\begin{verbatim}

public List<Product> getProducts() {
    List<Product> products = new ArrayList<Product>();
    for (Order order : orders) {
        products.addAll(order.getProducts());
    }
    return products;
}

\end{verbatim}\end{tiny}
\end{example}

\begin{example}[Código Scala]
\begin{tiny}
\begin{verbatim}
def products = orders.flatMap(o => o.products)
\end{verbatim}\end{tiny}
\end{example}
\end{columns}
\end{frame}

%--------wordcount----------------------
\begin{frame}[fragile]
\frametitle{Un lenguaje de programación: Scala}
\begin{columns}[c] % The "c" option specifies centered vertical alignment while the "t" option is used for top vertical alignment

\column{.60\textwidth} % Left column and width
\textbf{Ejemplo word count}
\begin{example}[Código Hadoop]
\begin{tiny}\fontsize{1}{1}\selectfont
\begin{verbatim}
...
class WordCountMapper extends MapReduceBase
    implements Mapper<IntWritable, Text, Text, IntWritable> {
static final IntWritable one = new IntWritable(1);
static final Text word = new Text;

@Override public void map(IntWritable key, Text valueDocContents,
 OutputCollector<Text, IntWritable> output, Reporter reporter) {
String[] tokens = valueDocContents.toString.split("\\s+");
 for (String wordString: tokens) {
    if (wordString.length > 0) {
       word.set(wordString.toLowerCase);
       output.collect(word, one);
    }
 }
}
}
class WordCountReduce extends MapReduceBase
   implements Reducer<Text, IntWritable, Text, IntWritable> {
	
public void reduce(Text keyWord,java.util.Iterator<IntWritable> counts,
   OutputCollector<Text, IntWritable> output, Reporter reporter) {
int totalCount = 0;
while (counts.hasNext) {
   totalCount += counts.next.get;
}
\end{verbatim}\end{tiny}
\end{example}
\column{.47\textwidth} % Right column and width
%\frametitle{Verbatim}
\begin{example}[Código Scalding]
\begin{tiny}\fontsize{1}{1}\selectfont
\begin{verbatim}

import com.twitter.scalding._
class WordCount(args : Args) extends Job(args) {
 TextLine(args("input"))
  .read
  .flatMap('line -> 'word) {
  line: String => line.trim.toLowerCase.split("""\s+""")
  }
  .groupBy('word){ group => group.size('count) }
  .write(Tsv(args("output")))
}

\end{verbatim}\end{tiny}
\end{example}
\end{columns}
\end{frame}



%------------------transparencia TDD---------
\begin{frame}[fragile]
\frametitle{Test driven development - TDD }
%\begin{columns}[c] % The "c" option specifies centered vertical alignment while the "t" option is used for top vertical alignment
\textbf{Scalatest y Funsite}
%\column{.20\textwidth} % Left column and width

%\column{.90\textwidth} % Right column and width
\begin{example}[Funsuite test]
\begin{tiny}\fontsize{7}{8}\selectfont
\begin{verbatim}
package org.scalatest.examples.funsuite

import org.scalatest.FunSuite

class SetSuite extends FunSuite {

  test("An empty Set should have size 0") {
    assert(Set.empty.size === 0)
  }

  test("Invoking head on an empty Set should produce NoSuchElementException") {
    assertThrows[NoSuchElementException] {
      Set.empty.head
    }
  }
}
\end{verbatim}\end{tiny}
\end{example}
%\end{columns}
\end{frame}
%-------------PLanificación------------------- 
\begin{frame}
\frametitle{Planificación del proyecto}
\setganttlinklabel{f-s}{FINISH-TO-START}
\begin{figure}[H]
 \makebox[\textwidth][c]{ \resizebox{.9999\textwidth}{!}{
\begin{ganttchart}[ vgrid,x unit=0.4cm,
            y unit title=0.7cm,
            y unit chart=0.9cm,
            canvas/.append style={rounded corners=1mm, draw=none, fill=orange!9},
            bar/.append style={fill=orange!40,rounded corners=1.5mm, draw=none},
            milestone/.append style={fill=orange!90,rounded corners=0mm, draw=none},
            link/.append style={-to,black!70},
            title/.style={fill=orange!60, draw=none, rounded corners=2mm},
title label font=\color{white}\bfseries,
title left shift=-.1,
title right shift=-.1,
title top shift=.05,
title height=.75
]{1}{30}
\gantttitle{2016}{30} \\
%\gantttitlelist{1,...,6}{5} \\
\gantttitle{Julio}{5}
\gantttitle{Agosto}{5}
\gantttitle{Septiembre}{5}
\gantttitle{Octubre}{5}
\gantttitle{Noviembre}{5}
\gantttitle{Diciembre}{5} \\
%\ganttgroup{Group 1}{1}{7} \\
\ganttbar{Revisión bibliográfica y documentación}{3}{9} \\
\ganttmilestone{Fin de bibliografía}{9} \ganttnewline
\ganttlinkedbar[link type=f-s]{Análisis de requisitos y diseño}{10}{10}\\
\ganttlinkedbar[link type=f-s]{Implementación y eval. Del Tokenizador}{11}{15}\\
\ganttlinkedbar[link type=f-s]{Implementación y eval. Del POS Tagger}{16}{20}\\
\ganttlinkedbar[link type=f-s]{Implementación y eval. Del Lematizador}{21}{25}\\
\ganttmilestone{Fin de código}{25} \ganttnewline
\ganttlinkedbar{Memoria}{26}{27}\\
%\ganttlinkedbar[link type=f-s]{Interfaz gráfica}{19}{23}\\
%\ganttmilestone{Informe trimestral 2}{24} \ganttnewline
%\ganttlinkedbar{Interfaz gráfica}{23}{29}\\
%\ganttlinkedbar{Entrega final}{29}{30}\\
\ganttlink{elem0}{elem1}
\ganttlink{elem5}{elem6}
\end{ganttchart}}}
\end{figure} 
\end{frame}
%-------------Diagramas------------------- 
\begin{frame}
\frametitle{Diagrama de las clases}
\begin{figure}[h!]
\resizebox{.700\textwidth}{!}{
\begin{tikzpicture}

\umlemptyclass{Context}
\umlemptyclass[x=5]{Lemmatizer}
\umlemptyclass[x=9]{Tokenizer}
\umlemptyclass[x=5,y=-7]{Parser}
\umlemptyclass[x=12,y=-7]{AppTest}
\umlemptyclass[x=-1.8,y=-7]{Lexicon}
\umlemptyclass[x=-2,y=-13]{PosTagger}
\umlemptyclass[x=5,y=-13]{Morphology}
\umlemptyclass[x=12]{Funsuite}
\umluniassoc[geometry=-|,mult1=1,pos1=1.9,anchor1=30,mult2=*, pos2=0.33]{Parser}{Context}
\umluniassoc[geometry=--,mult1=1,pos1=0.9,mult2=*, pos2=0.1]{Parser}{Lemmatizer}
\umluniassoc[geometry=-|-,mult1=1,pos1=1.9,anchor1=30, mult2=*, pos2=0.8]{Parser}{Tokenizer}
\umluniassoc[geometry=--,mult2=1..*, pos2=0.95]{AppTest}{Parser}
\umluniassoc[geometry=--,mult1=1,pos1=0.9,mult2=*, pos2=0.1]{Parser}{Lexicon}
\umluniassoc[geometry=--,mult1=1,pos1=0.9,mult2=*, pos2=0.1]{Parser}{Morphology}
\umluniassoc[geometry=|-|,mult1=1,anchor1=130,anchor2=50, pos1=2.7,mult2=*, pos2=0.5]{Parser}{PosTagger}
\umldep[geometry=--]{PosTagger}{Morphology}
\umldep[geometry=--]{PosTagger}{Lexicon}
\umldep[geometry=|-, anchor1=-220]{PosTagger}{Context}
\umlinherit[geometry=--]{AppTest}{Funsuite}
\end{tikzpicture}}
\end{figure}
\end{frame}
%---------------material---------------------
\subsection{Material empleado}
\begin{frame}[fragile]
\frametitle{Material empleado: POS tagger}
\textbf{Wikicorpus}
\begin{columns}[c] % The "c" option specifies centered vertical alignment while the "t" option is used for top vertical alignment
\column{.30\textwidth} % Left column and width
\begin{itemize}\fontsize{7}{8}\selectfont
\item versión en Español
\item 120 millones de palabras
\item Obtenido de Wikipedia
\item 1000 líneas
\end{itemize}
\begin{example}[Wikicorpus]
\begin{tiny}\fontsize{5}{8}\selectfont
\begin{verbatim}
es ser VSIP3S0 01775973
un uno DI0MS0 0
futbolista futbolista NCCS000 0
bosnio bosnio AQ0MS0 02731920
que que PR0CN000 0
juega jugar VMIP3S0 00727813
como como CS 0
delantero delantero NCMS000 00466114
\end{verbatim}\end{tiny}
\end{example}
\column{.85\textwidth} % Left column and width
\begin{normalsize}
\begin{figure}
\includegraphics[width=0.99\linewidth]{wikicorpus.png}
\end{figure}
\end{normalsize}
\end{columns}
\end{frame}

%---------------obtención del léxico-----------
\begin{frame}[fragile]
\frametitle{POS tagger - Obtención del léxico}
\begin{columns}[t] % The "c" option specifies centered vertical alignment while the "t" option is used for top vertical alignment
\column{.40\textwidth} % Left column and width
\textbf{Pasos:}
\begin{enumerate}
\item Contar ocurrencia de cada palabra en corpus
\item Contar ocurrencia de las etiquetas. Hay palabras que
pueden tener varias etiquetas
\item Construir diccionario tomando las palabras más frecuentes y su etiqueta más frecuente
\end{enumerate}
\column{.70\textwidth} % Left column and width
%\fontsize{0.3}{0.3}\selectfont
\begin{algorithm}[H]
\begin{scriptsize}
    \begin{algorithmic}[1]
    %\algrenewcommand\alglinenumber[1]{\tiny #1:}
    \Procedure{createLexicon(corpus, maxLines=100000)}{}
    \State $\text{Lexicon} \gets$ \o
    \State $\text{top} \gets$ \o
    \For{$\text{sentence in corpus}$}
            \For{$\text{w, tag in sentence}$}
            \State $\text{increase ocurrences of Lexicon(w, tag)} $
            \EndFor
    \EndFor        
    \For{$\text{w, tags in Lexicon}$} 
            \State $\text{freq} \gets \text{$\sum$ all ocurrences of tags for w}$
             \State $\text{tag} \gets \text{the tag with bigger ocurrence for w}$
             \State $\text{top} \gets \text{top + (freq,w,tag) }$
            \EndFor
            
     \State $\text{get the maxLines with bigger ocurrency}$ 
     \State $\text{write to file}$      
        \EndProcedure
    \end{algorithmic}
    \label{alg:rAP}
    \caption{Obtención del Léxico}
    \end{scriptsize}
\end{algorithm}

\end{columns}
\end{frame}

%------------obtención de Contexto
\begin{frame}[fragile]
\frametitle{POS tagger - Obtención del Contexto}
\begin{columns}[t] % The "c" option specifies centered vertical alignment while the "t" option is used for top vertical alignment
\column{.25\textwidth} % Left column and width
\textbf{Pasos:}
\begin{enumerate}
\item Anonimizar nombres propios en el corpus
\item Entrenar algoritmo de Brill
\end{enumerate}
\column{.99\textwidth} % Left column and width
\begin{algorithm}[H]
\begin{tiny}\fontsize{7}{8}\selectfont
    \begin{algorithmic}[1]
    %\algrenewcommand\alglinenumber[1]{\tiny #1:}
    \Procedure{BrillTagger(corpus,lexicon,rate\_error,rulesTlist)}{}
    \State $\text{$C_{i}$} \gets \text{initial tagging of corpus}$
\State $\text{errors} \gets \text{compute errors of $C_{i}$}$
\State $\text{Result} \gets$ \o
\State $\text{i} \gets 0$
\State $\text{nErrors} \gets \text{number of errors}$
\State $\text{best}  \gets$ \o
\While{$\text{nErrors} $>$ \text{rate\_error}$} 
        \For{$\text{each error in errors}$ }
            \For{$\text{each rule in instances(rulesTlist) }$}
            \State $\text{score(rule)} \gets \text{good corrections of rule -
             bad corrections of rule}$ \text{ in $C_{i}$}
            \EndFor
        \EndFor
        \State $\text{best} \gets \text{rule with best score}$
		\State $\text{$C_{i+1}$} \gets \text{Apply(best, $C_{i}$ )}$
		\State $\text{Results} \gets \text{Results+best}$
		\State $\text{i} \gets \text{i+1}$
        \EndWhile
        \EndProcedure
        \State \Return Results
    \end{algorithmic}
    \label{alg:rAP}
    \caption{Algoritmo de Brill}
    \end{tiny}
\end{algorithm}
\end{columns}
\end{frame}


%--------------Obtención de la morfología
\begin{frame}[fragile]
\frametitle{POS tagger - Obtención de la Morfología}
\begin{columns}[t] % The "c" option specifies centered vertical alignment while the "t" option is used for top vertical alignment
\column{.30\textwidth} % Left column and width
\textbf{Pasos:}
\begin{enumerate}
\begin{scriptsize}
\item Detectar sufijos y contar su ocurrencia en palabras que no sean NP
\item Calcular freq de la etiqueta que más aparece
\item Filtrar: si emparejan menos de 10 palabras, su etiqueta más freq no se da un 80\% o NCS
\end{scriptsize}
\end{enumerate}
\column{.80\textwidth} % Left column and width
   \begin{algorithm}[H]
   \begin{scriptsize}\fontsize{8}{8}\selectfont
    \begin{algorithmic}[1]
    \Procedure{createMorphology(corpus, maxLines=125)}{}
    \State $\text{suffix} \gets$ \o
    \State $\text{f1} \gets$ \o
    \State $\text{f2} \gets$ \o 
    \For{$\text{sentence in corpus}$}
            \For{$\text{w, tag in sentence}$}
            \State $\text{x} \gets \text{last 5 words of w}$
            \If{\text{length(x) < length(w) and tag $\neq$ NP}} \State $\text{increase occurrences of suffix(x,tag)}$ \EndIf
            \EndFor
    \EndFor        
    \For{$\text{x, tags in suffix}$} 
    		\State $\text{tag} \gets \text{the tag with bigger ocurrence for x}$
            \State $\text{f1} \gets \text{$\sum$ all ocurrences of tags for words ending in x}$
            \State $\text{f2} \gets \text{ (number of ocurrences of tag)/f1}$ 
            \State $\text{top} \gets \text{top + (f1,f2,x,tag) }$
    \EndFor
            
     \State $\text{top} \gets \text{order rules by descendent ocurrency}$
     \State $\text{top} \gets \text{filter (f1,f2,x,tag) which f1 $\geq$ 10 and f2 > 0.8 }$
     \State $\text{top} \gets \text{get the top maxLines rules}$
     \State $\text{top} \gets \text{format top}$
     \State $\text{write to file}$     
        \EndProcedure
    \end{algorithmic}
    \label{alg:rAP}
    \caption{Obtención de las reglas morfológicas}
    \end{scriptsize}
\end{algorithm}    
\end{columns}
\end{frame}


%--------------Algoritmos implementados-------
%---tokenizador
\subsection{Algoritmos implementados}
\begin{frame}
\frametitle{Tokenizador}
%\textbf{¿Aquí explico mi algoritmo en código, pseudocódigo, enumerando los pasos?}
\begin{enumerate}
\item Preprocesado del String: manejo de comillas (simples y dobles), espacios en blanco, retornos de carro, saltos de línea.
\item Obtención de los tokens: 
\begin{itemize}\fontsize{8}{8}\selectfont
\item buscar secuencias de caracteres $\neq$ espacio en blanco + espacio en blanco
\item sobre cada coincidencia anterior: \begin{itemize}\fontsize{8}{7}\selectfont
	\item eliminar espacio en blanco final 
	\item comprobar si la primera letra es un signo de puntuación $\neq$ punto. Si lo es se elimina y añade a la lista de tokens, repitiendo hasta que la primera letra no sea un signo de puntuación.
	\item comprobar que si la última letra es un signo de puntuación: 
\item Si son puntos suspensivos $\Rightarrow$ eliminar los tres puntos  y añadirlos a una lista para ser añadidos después de la palabra a la lista de tokens
\item Si el final de la palabra es un signo de puntuación $\neq$ punto $\Rightarrow$ se quita y se añade a una lista para ser añadido después de la palabra a la lista de tokens
\item Si la palabra acaba en punto $\Rightarrow$ comprobar si es una abreviación. Si lo es, añadir tal cual a la lista de tokens. Sino, separar palabra del punto y añadir primero la palabra y luego el punto.
\end{itemize}
\end{itemize}
\item Separación de frases
\end{enumerate}
\end{frame}



%---pos tagger
\begin{frame}
\frametitle{POS tagger}
\begin{algorithm}[H]
\begin{scriptsize}
    \begin{algorithmic}[1]
    %\algrenewcommand\alglinenumber[1]{\tiny #1:}
    \Procedure{findTags(tokens,Lexicon,Morphology,Context,default(NCS,NP,Z),mapToTagset)}{}
	 \For{$\text{t in tokens}$}
	 	\If{$\text{Lexicon contains token}$} $\text{tag(t)} \gets \text{Lexicon(token)}$ \Else $\text{ tag(t)}  \gets \text{None}$ \EndIf 
            \EndFor   
     \For{$\text{t in tokens with tag == None}$}
     \If{$\text{t startsWith capital}$} $\text{tag(t)} \gets \text{NP}$ \ElsIf{\text{t is digit,symbol or both}} $\text{tag(t)} \gets \text{Z}$ \ElsIf{\text{Morphology}} $\text{tag(t)} \gets \text{Apply(Morphology,t)}$ 
     \Else $ \text{ tag(t)} \gets \text{NCS}$ \EndIf 
    \EndFor 
     \If{$\text{Context}$} $\text{foreach t in tokens, tag(t)} \gets \text{Apply(Context)}$ \EndIf  
     \If{$\text{mapToTagset}$} $\text{foreach t in tokens, tag(t)} \gets \text{mapToTagset(tag(t))}$ \EndIf       
        \EndProcedure
    \end{algorithmic}
    \label{alg:rAP}
    \caption{POS tagger}
    \end{scriptsize}
\end{algorithm}
\end{frame}


%---apply context and morphology
\begin{frame}[fragile]
\frametitle{Aplicación de morfología y contexto}
\begin{columns}[t]
\column{.50\textwidth} % Left column and width
\textbf{Morfología}
\begin{example}[reglas morfológicas]
\begin{tiny}
\begin{verbatim}
ly hassuf 2 RB x
NN s fhassuf 1 NNS x
\end{verbatim}\end{tiny}
\end{example}
\begin{tiny}\begin{block}{comandos reglas}
\begin{verbatim}
"word", // Word is x.
"char", // Word contains x.
"haspref", // Word starts with x.
"hassuf", // Word end with x.
"addpref", // x + word is in lexicon.
"addsuf", // Word + x is in lexicon.
"deletepref",//Word without x at the start is
// in lexicon.
"deletesuf", //Word without x at the end 
//is in lexicon.
"goodleft", // Word preceded by word x.
"goodright"// Word followed by word x.
\end{verbatim}\end{block}\end{tiny}

\column{.56\textwidth} % Left column and width
\textbf{Contexto}
\begin{example}[reglas morfológicas]
\begin{tiny}
\begin{verbatim}
VBD VB PREVTAG IN
PR CS PREV1OR2TAG RG
Z W PREVWD año
\end{verbatim}\end{tiny}
\end{example}
\begin{tiny}\begin{block}{comandos reglas}
\begin{verbatim}
"prevtag", // Preceding word is tagged x.
"nexttag", // Following word is tagged x.
"prev2tag", // Word 2 before is tagged x.
"next2tag", // Word 2 after is tagged x.
"prev1or2tag", // One of 2 preceding words is tagged x.
"next1or2tag", // One of 2 following words is tagged x.
"prev1or2or3tag", //1 of 3 preceding words is tagged x.
"next1or2or3tag", //1 of 3 following words is tagged x.
"surroundtag", // Preceding word is tagged x and 
//following word is tagged y.
"curwd", // Current word is x.
"prevwd", // Preceding word is x.
"nextwd", // Following word is x.
"prev1or2wd", // One of 2 preceding words is x.
"next1or2wd", // One of 2 following words is x.
"next1or2or3wd", // One of 3 preceding words is x.
"prev1or2or3wd", // One of 3 following words is x.
\end{verbatim}\end{block}\end{tiny}
\end{columns}
\end{frame}


%---lematizador
\begin{frame}
\frametitle{Lematizador}
\begin{algorithm}[H]
\begin{scriptsize}
    \begin{algorithmic}[1]
    %\algrenewcommand\alglinenumber[1]{\tiny #1:}
    \Procedure{get\_lemmas(tokens,tags)}{}
    \State $\text{lemmas} \gets$ \o
	 \For{$\text{each token,tag in (tokens,tags)}$}
	 	\If{$\text{tag startsWith DT}$} $\text{lemmas} \gets$ $\text{lemmas + singularize(token,tag)}$ \EndIf 
	 	\If{$\text{tag startsWith JJ}$} $\text{lemmas} \gets$ $\text{lemmas + predicative(token)}$ \EndIf
	 	\If{$\text{tag startsWith NNS}$} $\text{lemmas} \gets$ $\text{lemmas + singularize(token,tag)}$ \EndIf 
	 	\If{$\text{tag startsWith VB or MD}$} $\text{lemmas} \gets$ $\text{lemmas+verb\_lemma(token)}$ \EndIf 
            \EndFor
            \State \Return $\text{lemmas}$   
        \EndProcedure
    \end{algorithmic}
    \label{alg:rAP}
    \caption{POS tagger}
    \end{scriptsize}
\end{algorithm}
\end{frame}

%---lematizador- singularize
\begin{frame}
\frametitle{Lematizador}
\begin{algorithm}[H]
\begin{scriptsize}
    \begin{algorithmic}[1]
    %\algrenewcommand\alglinenumber[1]{\tiny #1:}
    \Procedure{singularize(token,tag)}{}
    \State $\text{irregular\_endings} \gets \text{List(anes,án),(ones,ón),(unes,ún)...}$
	 	\If{$\text{tag == DT}$}
	 	\If{$\text{token in (la,las,los)}$} $\text{\Return el}$ \EndIf
	 	\If{$\text{token in (una,unas,unos)}$} $\text{\Return un}$ \EndIf \EndIf
	\If{$\text{token endsWith -es and token without 2 last chars endsWith (br,i,j,t,zn)}$} \State $\text{\Return word without its last char}$ \EndIf
	  \If{$\text{token endsWith irregular\_endings}$} \State $\text{\Return apply irregular\_endings to token }$ \EndIf
	  \If{$\text{token endsWith (osis,esis,isis)}$} \State $\text{\Return token }$ \EndIf
	  \If{$\text{token endsWith -ces}$} \State $\text{\Return token without 3 last chars+ z }$ \EndIf
	  \If{$\text{token endsWith -es}$} \State $\text{\Return token without 2last char}$ \EndIf
	  \If{$\text{token endsWith -s}$} \State $\text{\Return token without 1 last char}$ \EndIf
        \EndProcedure
    \end{algorithmic}
    \label{alg:rAP}
    \caption{Singularize}
    \end{scriptsize}
\end{algorithm}
\end{frame}

%---lematizador- predicative
\begin{frame}
\frametitle{Lematizador}
\begin{algorithm}[H]
\begin{scriptsize}
    \begin{algorithmic}[1]
    %\algrenewcommand\alglinenumber[1]{\tiny #1:}
    \Procedure{predicative(token)}{}
	 	\If{$\text{token endsWith (os, as)}$} $\text{token} \gets \text{remove last from token}$ \EndIf
	 	\If{$\text{token ends With (a)}$} $\text{token} \gets \text{remove last from token + o}$ \EndIf 
	\If{$\text{token ends With -es and length(token) >4 and $3^{\circ}$,$4^{\circ}$ by the tail are consonants}$} \State $\text{token} \gets \text{remove last char from token}$ \Else $\text{ token} \gets \text{remove 2 last chars from token}$ \EndIf
	\State \Return $\text{token}$
        \EndProcedure
    \end{algorithmic}
    \label{alg:rAP}
    \caption{Predicative}
    \end{scriptsize}
\end{algorithm}
\end{frame}

%---lematizador- verb lemma
\begin{frame}
\frametitle{Lematizador}
\begin{algorithm}[H]
\begin{scriptsize}\fontsize{6.5}{1}\selectfont

    \begin{algorithmic}[1]
    %\algrenewcommand\alglinenumber[1]{\tiny #1:}
    \Procedure{VerbsLemmatizer(token)}{}
    \State $\text{irregular\_inflections} \gets \text{(yéramos,ir),(cisteis,cer)....}$
     \State $\text{present\_plural\_inflections} \gets \text{(amos,áis),(emos,éis),(imos,ís)....}$
	 	\If{$\text{token endsWith (ar,er,ir)}$} $\Return \text{ token}$ \EndIf
	 	\If{$\text{token endsWith irregular\_inflections}$} $\text{token} \gets \text{apply(irregular\_inflections)}$ \EndIf 
	\If{$\text{token constains (zco,zca,zcá)}$} $\text{token} \gets \text{replace by -ce}$ \EndIf
	\If{$\text{token constains (ldr,ndr)}$} $\text{token} \gets \text{replace by -er from dr to end}$\EndIf
	\If{$\text{token is regular inflection from -ar}$} $\text{token} \gets \text{replace inflection by ar}$ \EndIf
	\If{$\text{token is regular inflection from -er and length(word without inflection)>2 and penultimate }$ \newline $\text{ from word without inflection} \neq \text{(i)}$} $\text{token} \gets \text{replace inflection by ir}$ \Else $\text{ replace inflection by -er}$ \EndIf
	\If{$\text{token is regular inflection from -ir}$} $\text{token} \gets \text{replace inflection by ir}$\EndIf
	\If{$\text{token ends with (a,o,as,an)}$} $\text{token} \gets \text{replace (a,o,as,an) by -ar}$ \EndIf
	\If{$\text{token is present singular $3^{\circ}$ person ending with -er }$} 
	\If{$\text{length(token without inflection)>2 and antepenultimate token without inflection is (i) }$} $\text{remove -e and add -ir}$ \Else $\text{ remove -e and add -er}$ \EndIf \EndIf
	\If{$\text{token ends with (er,es)}$}  $\text{similar to last two teps}$\EndIf
	\If{$\text{token endsWith present\_plural\_inflections}$} $\text{token} \gets \text{apply(present\_plural\_inflections)}$\EndIf
	
	\State \Return $\text{token}$
        \EndProcedure
    \end{algorithmic}
    \label{alg:rAP}
    \caption{Verbs lemmatizer}
    \end{scriptsize}
\end{algorithm}
\end{frame}
%--------------Resultados----------------
\section{Resultados}
\subsection{Resultados obtenidos}
\begin{frame}
\frametitle{Resultados}
\begin{table}
\begin{tabular}{l l l}
\toprule
\textbf{Algoritmo} & \textbf{Pattern.es} & \textbf{Este trabajo}\\
\midrule
singularize & 0.9390681  & 0.9390681 \\
predicative & 0.9323671  & 0.9468599 \\
find lemma  & 0.8082355  & 0.8082782 \\
tagger      & 0.9279443  & 0.9199328 \\
\bottomrule
\end{tabular}
\caption{Resultados de los algoritmos}
\end{table}
\end{frame}


\subsection{Ejemplos de resultados}
%----------------ejemplo1------
\begin{frame}
\textbf{¿cuento solo los que funciona mal o también el que funciona bien?}
\end{frame}
%------------------------------------------------

%\begin{frame}[fragile] % Need to use the fragile option when verbatim is used in the slide
%\frametitle{Verbatim}
%\begin{example}[Theorem Slide Code]
%\begin{verbatim}
%\begin{frame}
%\frametitle{Theorem}
%\begin{theorem}[Mass--energy equivalence]
%$E = mc^2$
%\end{theorem}
%\end{frame}\end{verbatim}
%\end{example}
%\end{frame}

%------------------------------------------------

%\begin{frame}
%\frametitle{Figure}
%Uncomment the code on this slide to include your own image from the same directory as the template .TeX file.
%\begin{figure}
%\includegraphics[width=0.8\linewidth]{test}
%\end{figure}
%\end{frame}

%------------------------------------------------
% añadir resumen,conclusiones ,trabajo futuro
% añadir planificacion, diagramas de clases
%  focusky
% github
%-------------------------------------------------

\begin{frame}[fragile] % Need to use the fragile option when verbatim is used in the slide
\frametitle{Citation}
An example of the \verb|\cite| command to cite within the presentation:\\~

This statement requires citation \cite{p1}.
\end{frame}

%------------------------------------------------

\begin{frame}
\frametitle{References}
\footnotesize{
\begin{thebibliography}{99} % Beamer does not support BibTeX so references must be inserted manually as below
\bibitem[Smith, 2012]{p1} John Smith (2012)
\newblock Title of the publication
\newblock \emph{Journal Name} 12(3), 45 -- 678.
\end{thebibliography}
}
\end{frame}

%------------------------------------------------

\begin{frame}
\Huge{\centerline{The End}}
\end{frame}

%----------------------------------------------------------------------------------------

\end{document} 
